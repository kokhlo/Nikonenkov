<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="mobileui/style.css">
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Schtandart app</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Vue.js -->
  <script src="./lib/vue.min.js"></script>
  <script src="./lib/vue-router.min.js"></script>
  <!-- Custom -->
  <script src="cordova.js"></script>
  <script type="text/javascript">

    // Переменные для добавление в строку запроса к базе "1С"
    var id, barcodes, value, activate, dt, people;

    document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
      //this.receivedEvent('deviceready');

      alert('Maybe something went wrong or maybe not 0');

      document.querySelector("#prepare").addEventListener("touchend", function () {
        window.QRScanner.prepare(onDone); // show the prompt

      });

      document.querySelector("#show").addEventListener("touchend", function () {
        window.QRScanner.show();

      });

      document.querySelector("#scan").addEventListener("touchend", function () {
        window.QRScanner.scan(displayContents)});

        function displayContents(err, text) {
          if (err) {
            // an error occurred, or the scan was canceled (error code `6`)
          } else {
            // The scan completed, display the contents of the QR code:
            alert(text);
          }
        }
     

    var onDone = function (err, status) {
      if (err) {
        alert(err._message);
      } else {
        alert('QRScanner is initialized. Status:');
        alert(status);
      }
    };

    window.QRScanner.prepare(onDone);
    alert('Maybe something went wrong or maybe not 1');
    SqlServer.init("172.16.0.100", "MSSQLSERVER", "sa", "1qaz@WSX", "schtadart", function (event) {
      alert(JSON.stringify(event));
    }, function (error) {
      alert(JSON.stringify(error));
    });

    alert('Maybe something went wrong or maybe not 2');
    window.SqlServer.testConnection(function (event) {
      alert(JSON.stringify(event));
    }, function (error) {
      alert("Error : " + JSON.stringify(error));
    });
    alert('Hurraah!');
    SqlServer.executeQuery("SELECT * FROM [schtadart].[dbo].[scanner] WHERE ", function (event) {
      alert(JSON.stringify(event));
    }, function (error) {
      alert("Error : " + JSON.stringify(error));
    });

    SqlServer.execute("insert scanner values ('5','2000060910019','1','33','2019-09-08 00:00:00.000','Хлопков Константин Владимирович')", function (event) {
      alert("Insert complete : " + JSON.stringify(event));
    }, function (error) {
      alert("Error : " + JSON.stringify(error));
    });
    alert('Hurraah! Fin');
    }

  </script>
  <link rel="stylesheet" type="text/css" media="screen" href="./css/index.css" />
</head>

<body>

  <div id="app">
    <!-- Вся навигация находится в сайдбаре, auth будет тоже в сайдбаре, следовательно роутерлинки должны быть тоже в сайдбаре -->

    <br>
    <router-view></router-view>


    <!-- Добавлен сайдбар и кнопки, можно удалить -->

    <body class="padding grey-100 has-header has-sub-header">
      <div class="menu teal-900 cover blend-multiply" id="menuDiscover" style="background-image:url(/img/nature1.jpg)">
        <div class="cover align-center">
          <img class="avatar circle border-white shadow" src="/img/33.jpg">
          <h1 class="text-teal-300">Konstantin Khlopkov</h1>
          <p class="text-grey">hlopkov-k@schtandart.com</p>
        </div>
        <div class="list no-border">
          <router-link style="font-family: sans-serif" to="/qc">
            <a class="item space-small">
              <div class="left">
                <i class="icon ion-ios-heart-outline grey-300"></i>
              </div>
              <h1 class="text-grey-300">ОТК</h1>
            </a>
          </router-link>
          <router-link style="font-family: sans-serif" to="/">
            <a class="item space-small">
              <div class="left">
                <i class="icon ion-ios-flame-outline grey-300"></i>
              </div>
              <h1 class="text-grey-300">Стеколка</h1>
              <div class="right">
                <span class="text-small border-red text-red radius padding">12</span>
              </div>
            </a>
          </router-link>
          <a class="item space-small">
            <div class="left">
              <i class="icon ion-ios-location-outline grey-300"></i>
            </div>
            <h1 class="text-grey-300">Замеры</h1>
          </a>
          <a class="item space-small">
            <div class="left">
              <i class="icon ion-ios-person-outline grey-300"></i>
            </div>
            <h1 class="text-grey-300">Заказы</h1>
            <div class="right">
              <span class="text-small border-green text-green radius padding">7</span>
            </div>
          </a>
          <a class="item space-small">
            <div class="left">
              <i class="icon ion-ios-chatbubble-outline grey-300"></i>
            </div>
            <h1 class="text-grey-300">Чат</h1>
          </a>
        </div>
      </div>
      <div class="header teal">
        <div class="left">
          <button class="icon ion-navicon-round" onclick="openMenu('menuDiscover')"></button>
        </div>
        <h1 class="title align-center">Сканер штрихкодов</h1>
        <div class="right">
          <span class="icon-badge text-small red radius padding">3</span>
          <button class="icon ion-earth"></button>
        </div>
      </div>
      <div class="header sub teal">
        <div class="buttons-group full small">
          <button class="teal-700 border-teal radius-left">Latests</button>
          <button class="teal-600 border-teal">Favorites</button>
          <button class="teal-600 border-teal radius-right">All</button>
        </div>
      </div>
      <div class="space"></div>

    </body>

  </div>

  <script src="./js/index.js"></script>
  <script type="text/javascript" src="mobileui/mobileui.js"></script>
</body>

</html>